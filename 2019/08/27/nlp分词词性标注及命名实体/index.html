<!DOCTYPE html><html><head><meta name="generator" content="Hexo 3.9.0"><title>nlp分词词性标注及命名实体 - OneJane</title><meta charset="UTF-8"><meta name="description" content="微服务,高可用,高并发,人工智能"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1"><meta name="msvalidate.01" content="396E9693347B4D18AAE96D9E75B9B686"><link rel="shortcut icon" href="/images/a.ico" type="image/png"><meta name="description" content="nlp分词词性标注及命名实体"><meta name="keywords" content="nlp"><meta property="og:type" content="article"><meta property="og:title" content="nlp分词词性标注及命名实体"><meta property="og:url" content="https://onejane.github.io/2019/08/27/nlp分词词性标注及命名实体/index.html"><meta property="og:site_name" content="OneJane"><meta property="og:description" content="nlp分词词性标注及命名实体"><meta property="og:locale" content="zh-CN"><meta property="og:updated_time" content="2019-08-27T10:12:13.113Z"><meta name="twitter:card" content="summary"><meta name="twitter:title" content="nlp分词词性标注及命名实体"><meta name="twitter:description" content="nlp分词词性标注及命名实体"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/mdui@0.4.3/dist/css/mdui.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@9.15.8/styles/atom-one-dark.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.css"><link rel="stylesheet" href="//at.alicdn.com/t/font_1038733_0xvrvpg9c0r.css"><link rel="stylesheet" href="/css/style.css?v=1572918279967"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/aplayer@1.7.0/dist/APlayer.min.css"><script src="https://cdn.jsdelivr.net/npm/aplayer@1.7.0/dist/APlayer.min.js"></script></head><body class="mdui-drawer-body-left"><div id="nexmoe-background"><div class="nexmoe-bg" style="background-image:url(https://www.github.com/OneJane/blog/raw/master/小书匠/1566388885395.png)"></div><div class="mdui-appbar mdui-shadow-0"><div class="mdui-toolbar"> <a mdui-drawer="{target: '#drawer', swipe: true}" title="menu" class="mdui-btn mdui-btn-icon"><i class="mdui-icon material-icons">menu</i></a><div class="mdui-toolbar-spacer"></div> <a href="/" title="OneJane" class="mdui-btn mdui-btn-icon"><img src="https://www.github.com/OneJane/blog/raw/master/小书匠/1566388846021.png"></a></div></div></div><div id="nexmoe-header"><div class="nexmoe-drawer mdui-drawer" id="drawer"><div class="nexmoe-avatar mdui-ripple"> <a href="/" title="OneJane"><img src="https://www.github.com/OneJane/blog/raw/master/小书匠/1566388846021.png" alt="OneJane"></a></div><div class="nexmoe-count"><div><span>文章</span>40</div><div><span>标签</span>57</div><div><span>分类</span>11</div></div><ul class="nexmoe-list mdui-list" mdui-collapse="{accordion: true}"><a class="nexmoe-list-item mdui-list-item mdui-ripple" href="/" title="回到首页"><i class="mdui-list-item-icon nexmoefont icon-home"></i><div class="mdui-list-item-content"> 回到首页</div></a><a class="nexmoe-list-item mdui-list-item mdui-ripple" href="/about.html" title="关于博客"><i class="mdui-list-item-icon nexmoefont icon-info-circle"></i><div class="mdui-list-item-content"> 关于博客</div></a><a class="nexmoe-list-item mdui-list-item mdui-ripple" href="/py.html" title="我的朋友"><i class="mdui-list-item-icon nexmoefont icon-unorderedlist"></i><div class="mdui-list-item-content"> 我的朋友</div></a></ul><aside id="nexmoe-sidebar"><div class="nexmoe-widget-wrap"><h3 class="nexmoe-widget-title">社交按钮</h3><div class="nexmoe-widget nexmoe-social"><a class="mdui-ripple" href="https://www.zhihu.com/people/codewj/activities" target="_blank" mdui-tooltip="{content: 'zhihu'}" style="color:#e76a8d;background-color:rgba(231,106,141,.15)"><i class="nexmoefont icon-zhihu"></i></a><a class="mdui-ripple" href="https://github.com/OneJane" target="_blank" mdui-tooltip="{content: 'GitHub'}" style="color:#191717;background-color:rgba(25,23,23,.15)"><i class="nexmoefont icon-github"></i></a></div></div><div class="nexmoe-widget-wrap"><h3 class="nexmoe-widget-title">文章分类</h3><div class="nexmoe-widget"><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/人工智能/">人工智能</a><span class="category-list-count">9</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/博客/">博客</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/定时器/">定时器</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/持续集成/">持续集成</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/数据库/">数据库</a><span class="category-list-count">4</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/注册中心/">注册中心</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/测试/">测试</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/爬虫/">爬虫</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/系统/">系统</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/项目实战/">项目实战</a><span class="category-list-count">11</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/高可用/">高可用</a><span class="category-list-count">4</span></li></ul></div></div><div class="nexmoe-widget-wrap"><h3 class="nexmoe-widget-title">标签云</h3><div class="nexmoe-widget tagcloud"> <a href="/tags/Gensim/" style="font-size:10px">Gensim</a> <a href="/tags/Hanlp/" style="font-size:10px">Hanlp</a> <a href="/tags/NLTK/" style="font-size:10px">NLTK</a> <a href="/tags/OpenCV/" style="font-size:13.33px">OpenCV</a> <a href="/tags/Stanford-NLP/" style="font-size:10px">Stanford NLP</a> <a href="/tags/Tensorflow/" style="font-size:16.67px">Tensorflow</a> <a href="/tags/ant-design/" style="font-size:10px">ant design</a> <a href="/tags/ant-design-pro/" style="font-size:11.67px">ant design pro</a> <a href="/tags/docker/" style="font-size:18.33px">docker</a> <a href="/tags/dubbo/" style="font-size:11.67px">dubbo</a> <a href="/tags/elasticsearch/" style="font-size:10px">elasticsearch</a> <a href="/tags/elastisearch/" style="font-size:10px">elastisearch</a> <a href="/tags/email/" style="font-size:10px">email</a> <a href="/tags/es6/" style="font-size:10px">es6</a> <a href="/tags/feign/" style="font-size:10px">feign</a> <a href="/tags/flask/" style="font-size:10px">flask</a> <a href="/tags/freemarker/" style="font-size:10px">freemarker</a> <a href="/tags/function/" style="font-size:10px">function</a> <a href="/tags/gateway/" style="font-size:10px">gateway</a> <a href="/tags/gitlab/" style="font-size:11.67px">gitlab</a> <a href="/tags/haproxy/" style="font-size:10px">haproxy</a> <a href="/tags/jenkins/" style="font-size:11.67px">jenkins</a> <a href="/tags/jmeter/" style="font-size:10px">jmeter</a> <a href="/tags/keepalived/" style="font-size:10px">keepalived</a> <a href="/tags/linux/" style="font-size:10px">linux</a> <a href="/tags/maven/" style="font-size:11.67px">maven</a> <a href="/tags/multi-druid/" style="font-size:10px">multi druid</a> <a href="/tags/mybatis/" style="font-size:10px">mybatis</a> <a href="/tags/mybatisplus/" style="font-size:10px">mybatisplus</a> <a href="/tags/mysql/" style="font-size:10px">mysql</a> <a href="/tags/nacos/" style="font-size:11.67px">nacos</a> <a href="/tags/nexmoe/" style="font-size:10px">nexmoe</a> <a href="/tags/nlp/" style="font-size:15px">nlp</a> <a href="/tags/numpy/" style="font-size:10px">numpy</a> <a href="/tags/partition/" style="font-size:10px">partition</a> <a href="/tags/procedure/" style="font-size:10px">procedure</a> <a href="/tags/pxc/" style="font-size:10px">pxc</a> <a href="/tags/python/" style="font-size:10px">python</a> <a href="/tags/rabbitmq/" style="font-size:10px">rabbitmq</a> <a href="/tags/react/" style="font-size:11.67px">react</a> <a href="/tags/redis/" style="font-size:11.67px">redis</a> <a href="/tags/redis-cluster/" style="font-size:10px">redis-cluster</a> <a href="/tags/replication/" style="font-size:11.67px">replication</a> <a href="/tags/rocketmq/" style="font-size:11.67px">rocketmq</a> <a href="/tags/scrapy/" style="font-size:13.33px">scrapy</a> <a href="/tags/selenium/" style="font-size:13.33px">selenium</a> <a href="/tags/sentinel/" style="font-size:15px">sentinel</a> <a href="/tags/session/" style="font-size:10px">session</a> <a href="/tags/skywalking/" style="font-size:11.67px">skywalking</a> <a href="/tags/spring-cloud-alibaba/" style="font-size:20px">spring cloud alibaba</a> <a href="/tags/springboot/" style="font-size:15px">springboot</a> <a href="/tags/swagger/" style="font-size:10px">swagger</a> <a href="/tags/tk-mybatis/" style="font-size:10px">tk mybatis</a> <a href="/tags/umi/" style="font-size:10px">umi</a> <a href="/tags/validate/" style="font-size:10px">validate</a> <a href="/tags/xxl-job/" style="font-size:11.67px">xxl-job</a> <a href="/tags/zookeeper/" style="font-size:10px">zookeeper</a></div></div><div class="nexmoe-widget-wrap"><h3 class="nexmoe-widget-title">文章归档</h3><div class="nexmoe-widget"><ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/10/">十月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/09/">九月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/08/">八月 2019</a></li></ul></div></div></aside><div class="nexmoe-copyright"> &copy; 2019 OneJane</div></div></div><div id="nexmoe-content"><div class="nexmoe-primary"><div class="nexmoe-post"><div class="nexmoe-post-cover"> <img src="https://www.github.com/OneJane/blog/raw/master/小书匠/5f549e01ba4ba668ee78d415b042a010_hd.jpg"><h1>nlp分词词性标注及命名实体</h1></div><div class="nexmoe-post-meta"><a><i class="nexmoefont icon-calendar-fill"></i> 2019年08月27日</a><a><i class="nexmoefont icon-areachart"></i> 3.6k 字</a><a><i class="nexmoefont icon-time-circle-fill"></i> 大概 17 分钟</a> <a class="nexmoefont icon-appstore-fill -link" href="/categories/人工智能/">人工智能</a> <a class="nexmoefont icon-tag-fill -link" href="/tags/nlp/">nlp</a></div><article><p> <a href="https://onejane.github.io/">nlp分词词性标注及命名实体</a></p><a id="more"></a><h1 id="分词"><a href="#分词" class="headerlink" title="分词"></a>分词</h1><p>==中文分词==(Chinese Word Segmentation)</p><blockquote><p>指的是将一个汉字序列切分成一个一个单独的词。分词就是将连续的字序列按照一定的规范重新组合成词序列的过程。</p></blockquote><h1 id="词性标注"><a href="#词性标注" class="headerlink" title="词性标注"></a>词性标注</h1><p>==词性标注==(Part-of-Speech tagging 或POS tagging)</p><blockquote><p>又称词类标注或者简称标注,是指为分词结果中的每个单词标注一个正确的词性的程 序,也即确定每个词是名词、动词、形容词或其他词性的过程。在汉语中,词性标注比较简单,因为汉语词汇词性多变的情况比较少见,大多词语只有一个词性,或者出现频次最高的词性远远高于第二位的词性。据说,只需选取最高频词性,即可实现80%准确率的中文词性标注程序。</p></blockquote><h1 id="命名实体识别"><a href="#命名实体识别" class="headerlink" title="命名实体识别"></a>命名实体识别</h1><p>==命名实体识别==(Named Entity Recognition,简称NER)</p><blockquote><p>又称作“专名识别”,是指识别文本中具有特定意义的实体,主要包括人名、地名、机构名、专有名词等。一般来说,命名实体识别的任务就是识别出待处理文本中三大类(实体类、时间类和数字类)、七小类(人名、机构名、地名、时间、日期、货币和百分比)命名实体。 在不同的顷目中,命名实体类别具有不同的定义。</p></blockquote><h1 id="准确分词之加载自定义字典分词"><a href="#准确分词之加载自定义字典分词" class="headerlink" title="准确分词之加载自定义字典分词"></a>准确分词之加载自定义字典分词</h1><p>当分词工具分词不准确时,该怎么办? 加载自定义字典?该如何加载?<br>cut_data.py</p><pre><code class="livecodeserver"># -*- coding=utf8 -*-
import jieba
import re
from tokenizer import cut_hanlp

# 加载字典
jieba.load_userdict(&quot;dict.txt&quot;)

# 交叉拼接list，把FLAG*替换成*期
def merge_two_list(a, b):
    c = []
    len_a, len_b = len(a), len(b)
    minlen = min(len_a, len_b)
    for i in range(minlen):
        c.append(a[i])
        c.append(b[i])

    if len_a &gt; len_b:
        for i in range(minlen, len_a):
            c.append(a[i])
    else:
        for i in range(minlen, len_b):
            c.append(b[i])
    return c


if __name__ == &quot;__main__&quot;:
    fp = open(&quot;text.txt&quot;, &quot;r&quot;, encoding=&quot;utf8&quot;)
    fout = open(&quot;result_cut.txt&quot;, &quot;w&quot;, encoding=&quot;utf8&quot;)
    # 特殊符号字典无法分离，正则区分
    regex1 = u&#39;(?:[^\u4e00-\u9fa5（）*&amp;……%￥$，,。.@! ！]){1,5}期&#39;  # 非汉字xxx期
    regex2 = r&#39;(?:[0-9]{1,3}[.]?[0-9]{1,3})%&#39;  # xx.xx%
    p1 = re.compile(regex1)
    p2 = re.compile(regex2)
    for line in fp.readlines(): # 逐行读取
        result1 = p1.findall(line)  # 返回匹配到的list
        if result1:
            regex_re1 = result1
            line = p1.sub(&quot;FLAG1&quot;, line)  # 将匹配到的替换成FLAG1
        result2 = p2.findall(line)
        if result2:
            line = p2.sub(&quot;FLAG2&quot;, line)

        words = jieba.cut(line)  # 结巴分词，type(word)返回一个generator object
        result = &quot; &quot;.join(words)  # 结巴分词结果 本身是一个generator object，所以使用 “ ”.join() 拼接起来

        # E:\hanlp\data\dictionary\custom\resume_nouns.txt在E:\hanlp\hanlp.properties配置
        # CustomDictionaryPath=data/dictionary/custom/CustomDictionary.txt; 现代汉语补充词库.txt; 全国地名大全.txt ns; 人名词典.txt; 机构名词典.txt; resume_nouns.txt; 上海地名.txt ns;data/dictionary/person/nrf.txt nrf;
        words1 = cut_hanlp(line)  # hanlp分词结果，返回的是str
        if &quot;FLAG1&quot; in result:
            result = result.split(&quot;FLAG1&quot;)
            result = merge_two_list(result, result1)
            ss = result
            result = &quot;&quot;.join(result)  # 本身是个list，我们需要的是str，所以使用 &quot;&quot;.join() 拼接起来
        if &quot;FLAG2&quot; in result:
            result = result.split(&quot;FLAG2&quot;)
            result = merge_two_list(result, result2)
            result = &quot;&quot;.join(result)
            # print(result)
        fout.write(&quot;jieba:&quot; + result)
        fout.write(&quot;hanlp:&quot; + words1)
    fout.close()</code></pre><p>tokenizer.py</p><pre><code class="livecodeserver"># encoding=utf8
import os, gc, re, sys

from jpype import *

root_path = &quot;E:/hanlp&quot;
djclass_path = &quot;-Djava.class.path=&quot; + root_path + os.sep + &quot;hanlp-1.7.4.jar;&quot; + root_path
startJVM(getDefaultJVMPath(), djclass_path, &quot;-Xms1g&quot;, &quot;-Xmx1g&quot;)

Tokenizer = JClass(&#39;com.hankcs.hanlp.tokenizer.StandardTokenizer&#39;)


def to_string(sentence, return_generator=False):
    if return_generator:
        return (word_pos_item.toString().split(&#39;/&#39;) for word_pos_item in Tokenizer.segment(sentence))
    else:
        return &quot; &quot;.join([word_pos_item.toString().split(&#39;/&#39;)[0] for word_pos_item in Tokenizer.segment(sentence)])
        # 这里的“”.split(&#39;/&#39;)可以将string拆分成list 如：&#39;ssfa/fsss&#39;.split(&#39;/&#39;) =&gt; [&#39;ssfa&#39;, &#39;fsss&#39;]


def seg_sentences(sentence, with_filter=True, return_generator=False):
    segs = to_string(sentence, return_generator=return_generator)
    if with_filter:
        g = [word_pos_pair[0] for word_pos_pair in segs if
             len(word_pos_pair) == 2 and word_pos_pair[0] != &#39; &#39; and word_pos_pair[1] not in drop_pos_set]
    else:
        g = [word_pos_pair[0] for word_pos_pair in segs if len(word_pos_pair) == 2 and word_pos_pair[0] != &#39; &#39;]
    return iter(g) if return_generator else g


def cut_hanlp(raw_sentence, return_list=True):
    if len(raw_sentence.strip()) &gt; 0:
        return to_string(raw_sentence) if return_list else iter(to_string(raw_sentence))</code></pre><h1 id="准确分词之动态调整词频和字典顺序"><a href="#准确分词之动态调整词频和字典顺序" class="headerlink" title="准确分词之动态调整词频和字典顺序"></a>准确分词之动态调整词频和字典顺序</h1><p>当分词字典的词冲突,相互影响该怎么办? 调整词频和字典顺序。<br>cut_data.py</p><pre><code class="clean"># -*- coding=utf8 -*-
import jieba
import re
from tokenizer import cut_hanlp

jieba.load_userdict(&quot;dict.txt&quot;)

# # 设置高词频：一个
# jieba.suggest_freq(&#39;台中&#39;,tune=True)

# 设置高词频：dict.txt中的每一行都设置一下
# fp=open(&quot;dict.txt&quot;, &#39;r&#39;, encoding=&#39;utf8&#39;)
# for line in fp:
#     line = line.strip()
#     jieba.suggest_freq(line, tune=True)

# # 设置高词频：dict.txt中的每一行都设置一下快速方法
[jieba.suggest_freq(line.strip(), tune=True) for line in open(&quot;dict.txt&quot;, &#39;r&#39;, encoding=&#39;utf8&#39;)]

if __name__ == &quot;__main__&quot;:
    string = &quot;台中正确应该不会被切开。&quot;
    # 通过调整词频 suggest_freq(line, tune=True)
    words_jieba = &quot; &quot;.join(jieba.cut(string, HMM=False))
    # 通过排序sort_dict_by_lenth，优先按照长的字典项匹配
    words_hanlp = cut_hanlp(string)
    print(&quot;words_jieba:&quot; + words_jieba, &#39;\n&#39;, &quot;words_hanlp:&quot; + words_hanlp)</code></pre><p>sort_dict_by_lenth.py</p><pre><code class="lua"># encoding=utf8
import os

dict_file = open(
    &quot;E:&quot; + os.sep + &quot;hanlp&quot; + os.sep + &quot;data&quot; + os.sep + &quot;dictionary&quot; + os.sep + &quot;custom&quot; + os.sep + &quot;resume_nouns.txt&quot;,
    &#39;r&#39;, encoding=&#39;utf8&#39;)
d = {}

[d.update({line: len(line.split(&quot; &quot;)[0])}) for line in dict_file]
# 读取源字典文件并从长到短排序 优先匹配长字典项
f = sorted(d.items(), key=lambda x: x[1], reverse=True)
dict_file = open(
    &quot;E:&quot; + os.sep + &quot;hanlp&quot; + os.sep + &quot;data&quot; + os.sep + &quot;dictionary&quot; + os.sep + &quot;custom&quot; + os.sep + &quot;resume_nouns1.txt&quot;,
    &#39;w&#39;, encoding=&#39;utf8&#39;)
[dict_file.write(item[0]) for item in f]
dict_file.close()</code></pre><h1 id="词性标注代码实现及信息提取"><a href="#词性标注代码实现及信息提取" class="headerlink" title="词性标注代码实现及信息提取"></a>词性标注代码实现及信息提取</h1><p>extract_data.py</p><pre><code class="livecodeserver"># -*- coding=utf8 -*-
import jieba
import re
from tokenizer import seg_sentences

fp = open(&quot;text.txt&quot;, &#39;r&#39;, encoding=&#39;utf8&#39;)
fout = open(&quot;out.txt&quot;, &#39;w&#39;, encoding=&#39;utf8&#39;)
for line in fp:
    line = line.strip()
    if len(line) &gt; 0:
        fout.write(&#39; &#39;.join(seg_sentences(line)) + &quot;\n&quot;)
fout.close()
if __name__ == &quot;__main__&quot;:
    pass</code></pre><p>tokenizer.py</p><pre><code class="livecodeserver"># encoding=utf8
import os, gc, re, sys

from jpype import *

root_path = &quot;E:/hanlp&quot;
djclass_path = &quot;-Djava.class.path=&quot; + root_path + os.sep + &quot;hanlp-1.7.4.jar;&quot; + root_path
startJVM(getDefaultJVMPath(), djclass_path, &quot;-Xms1g&quot;, &quot;-Xmx1g&quot;)
Tokenizer = JClass(&#39;com.hankcs.hanlp.tokenizer.StandardTokenizer&#39;)
keep_pos = &quot;q,qg,qt,qv,s,t,tg,g,gb,gbc,gc,gg,gm,gp,m,mg,Mg,mq,n,an,vn,ude1,nr,ns,nt,nz,nb,nba,nbc,nbp,nf,ng,nh,nhd,o,nz,nx,ntu,nts,nto,nth,ntch,ntcf,ntcb,ntc,nt,nsf,ns,nrj,nrf,nr2,nr1,nr,nnt,nnd,nn,nmc,nm,nl,nit,nis,nic,ni,nhm,nhd&quot;
keep_pos_nouns = set(keep_pos.split(&quot;,&quot;))
keep_pos_v = &quot;v,vd,vg,vf,vl,vshi,vyou,vx,vi&quot;
keep_pos_v = set(keep_pos_v.split(&quot;,&quot;))
keep_pos_p = set([&#39;p&#39;, &#39;pbei&#39;, &#39;pba&#39;])
drop_pos_set = set(
    [&#39;xu&#39;, &#39;xx&#39;, &#39;y&#39;, &#39;yg&#39;, &#39;wh&#39;, &#39;wky&#39;, &#39;wkz&#39;, &#39;wp&#39;, &#39;ws&#39;, &#39;wyy&#39;, &#39;wyz&#39;, &#39;wb&#39;, &#39;u&#39;, &#39;ud&#39;, &#39;ude1&#39;, &#39;ude2&#39;, &#39;ude3&#39;,
     &#39;udeng&#39;, &#39;udh&#39;, &#39;p&#39;, &#39;rr&#39;, &#39;w&#39;])
han_pattern = re.compile(r&#39;[^\dA-Za-z\u3007\u4E00-\u9FCB\uE815-\uE864]+&#39;)
HanLP = JClass(&#39;com.hankcs.hanlp.HanLP&#39;)


def to_string(sentence, return_generator=False):
    if return_generator:
        return (word_pos_item.toString().split(&#39;/&#39;) for word_pos_item in Tokenizer.segment(sentence))
    else:
        return [(word_pos_item.toString().split(&#39;/&#39;)[0], word_pos_item.toString().split(&#39;/&#39;)[1]) for word_pos_item in
                Tokenizer.segment(sentence)]


def seg_sentences(sentence, with_filter=True, return_generator=False):
    segs = to_string(sentence, return_generator=return_generator)
    if with_filter:
        g = [word_pos_pair[0] for word_pos_pair in segs if
             len(word_pos_pair) == 2 and word_pos_pair[0] != &#39; &#39; and word_pos_pair[1] not in drop_pos_set]
    else:
        g = [word_pos_pair[0] for word_pos_pair in segs if len(word_pos_pair) == 2 and word_pos_pair[0] != &#39; &#39;]
    return iter(g) if return_generator else g</code></pre><h1 id="TextRank算法原理介绍"><a href="#TextRank算法原理介绍" class="headerlink" title="TextRank算法原理介绍"></a>TextRank算法原理介绍</h1><p>tex_rank.py</p><pre><code class="python"># -*- coding=utf8 -*-
from jieba import analyse

# 引入TextRank关键词抽取接口 
textrank = analyse.textrank  # 原始文本
text = &quot;非常线程是程序执行时的最小单位，它是进程的一个执行流，\ 是CPU调度和分派的基本单位，一个进程可以由很多个线程组成，\ 线程间共享进程的所有资源，每个线程有自己的堆栈和局部变量。\ 线程由CPU独立调度执行，在多CPU环境下就允许多个线程同时运行。\ 同样多线程也可以实现并发操作，每个请求分配一个线程来处理。&quot;
print(&quot;\nkeywords by textrank:&quot;)  # 基于TextRank算法进行关键词抽取
keywords = textrank(text, topK=10, withWeight=True, allowPOS=(&#39;ns&#39;, &#39;n&#39;))

# 输出抽取出的关键词 f
words = [keyword for keyword, w in keywords if w &gt; 0.2]
print(&#39; &#39;.join(words) + &quot;\n&quot;)</code></pre><h1 id="jieba-词性标注"><a href="#jieba-词性标注" class="headerlink" title="jieba 词性标注"></a>jieba 词性标注</h1><table><thead><tr><th>标注</th><th>含义</th><th>来源</th></tr></thead><tbody><tr><td>Ag</td><td>形语素</td><td>形容词性语素形容词代码为 a,语素代码g前面置以A</td></tr><tr><td>a</td><td>形容词</td><td>取英语形容词 adjective的第1个字母</td></tr><tr><td>ad</td><td>副形词</td><td>直接作状语的形容词形容词代码 a和副词代码d并在一起</td></tr><tr><td>an</td><td>名形词</td><td>具有名词功能的形容词形容词代码 a和名词代码n并在一起</td></tr><tr><td>b</td><td>区别词</td><td>取汉字“别”的声母</td></tr><tr><td>c</td><td>连词</td><td>取英语连词 conjunction的第1个字母</td></tr><tr><td>dg</td><td>副语素</td><td>副词性语素副词代码为 d,语素代码g前面置以D</td></tr><tr><td>d</td><td>副词</td><td>取 adverb的第2个字母,因其第1个字母已用于形容词</td></tr><tr><td>e</td><td>叹词</td><td>取英语叹词 exclamation的第1个字母</td></tr><tr><td>f</td><td>方位词</td><td>取汉字“方”</td></tr><tr><td>g</td><td>语素</td><td>绝大多数语素都能作为合成词的“词根”,取汉字“根”的声母</td></tr><tr><td>h</td><td>前接成分</td><td>取英语 head的第1个字母</td></tr><tr><td>i</td><td>成语</td><td>取英语成语 idiom的第1个字母</td></tr><tr><td>j</td><td>简称略语</td><td>取汉字“简”的声母</td></tr><tr><td>k</td><td>后接成分</td><td></td></tr><tr><td>l</td><td>习用语</td><td>习用语尚未成为成语,有点“临时性”,取“临”的声母</td></tr><tr><td>m</td><td>数词</td><td>取英语 numeral的第3个字母,n,u已有他用</td></tr><tr><td>Ng</td><td>名语素</td><td>名词性语素名词代码为 n,语素代码g前面置以N</td></tr><tr><td>n</td><td>名词</td><td>取英语名词 noun的第1个字母</td></tr><tr><td>nr</td><td>人名</td><td>名词代码 n和“人(ren)”的声母并在一起</td></tr><tr><td>ns</td><td>地名</td><td>名词代码 n和处所词代码s并在一起</td></tr><tr><td>nt</td><td>机构团体</td><td>“团”的声母为 t,名词代码n和t并在一起</td></tr><tr><td>nz</td><td>其他丏名</td><td>“丏”的声母的第 1个字母为z,名词代码n和z并在一起</td></tr><tr><td>o</td><td>拟声词</td><td>取英语拟声词 onomatopoeia的第1个字母</td></tr><tr><td>p</td><td>介词</td><td>取英语介词 prepositional的第1个字母</td></tr><tr><td>q</td><td>量词</td><td>取英语 quantity的第1个字母</td></tr><tr><td>r</td><td>代词</td><td>取英语代词 pronoun的第2个字母,因p已用于介词</td></tr><tr><td>s</td><td>处所词</td><td>取英语 space的第1个字母</td></tr><tr><td>tg</td><td>时语素</td><td>时间词性语素时间词代码为 t,在语素的代码g前面置以T</td></tr><tr><td>t</td><td>时间词</td><td>取英语 time的第1个字母</td></tr><tr><td>u</td><td>助词</td><td>取英语助词 auxiliary</td></tr><tr><td>vg</td><td>动语素</td><td>动词性语素动词代码为 v在语素的代码g前面置以V</td></tr><tr><td>v</td><td>动词</td><td>取英语动词 verb的第一个字母</td></tr><tr><td>vd</td><td>副动词</td><td>直接作状语的动词动词和副词的代码并在一起</td></tr><tr><td>vn</td><td>名动词</td><td>指具有名词功能的动词动词和名词的代码并在一起</td></tr><tr><td>w</td><td>标点符号</td><td></td></tr><tr><td>x</td><td>非语素字</td><td>非语素字只是一个符号,字母 x通常用于代表未知数、符号</td></tr><tr><td>y</td><td>语气词</td><td>取汉字“语”的声母</td></tr><tr><td>z</td><td>状态词</td><td>取汉字“状”的声母的前一个字母</td></tr><tr><td>un</td><td>未知词</td><td>不可识别词及用户自定义词组取英文Unkonwn首两个字母(非北大标准,CSW分词中定义)</td></tr></tbody></table><h1 id="hanlp词性标注"><a href="#hanlp词性标注" class="headerlink" title="hanlp词性标注"></a>hanlp词性标注</h1><table><thead><tr><th>标注</th><th>含义</th></tr></thead><tbody><tr><td>a</td><td>形容词</td></tr><tr><td>ad</td><td>副形词</td></tr><tr><td>ag</td><td>形容词性语素</td></tr><tr><td>al</td><td>形容词性惯用语</td></tr><tr><td>an</td><td>名形词</td></tr><tr><td>b</td><td>区别词</td></tr><tr><td>begin</td><td>仅用于始##始</td></tr><tr><td>bg</td><td>区别语素</td></tr><tr><td>bl</td><td>区别词性惯用语</td></tr><tr><td>c</td><td>连词</td></tr><tr><td>cc</td><td>并列连词</td></tr><tr><td>d</td><td>副词</td></tr><tr><td>dg</td><td>辄,俱,复之类的副词</td></tr><tr><td>dl</td><td>连语</td></tr><tr><td>e</td><td>叹词</td></tr><tr><td>end</td><td>仅用于终##终</td></tr><tr><td>f</td><td>方位词</td></tr><tr><td>g</td><td>学术词汇</td></tr><tr><td>gb</td><td>生物相关词汇</td></tr><tr><td>gbc</td><td>生物类别</td></tr><tr><td>gc</td><td>化学相关词汇</td></tr><tr><td>gg</td><td>地理地质相关词汇</td></tr><tr><td>gi</td><td>计算机相关词汇</td></tr><tr><td>gm</td><td>数学相关词汇</td></tr><tr><td>gp</td><td>物理相关词汇</td></tr><tr><td>h</td><td>前缀</td></tr><tr><td>i</td><td>成语</td></tr><tr><td>j</td><td>简称略语</td></tr><tr><td>k</td><td>后缀</td></tr><tr><td>l</td><td>习用语</td></tr><tr><td>m</td><td>数词</td></tr><tr><td>mg</td><td>数语素</td></tr><tr><td>Mg</td><td>甲乙丙丁之类的数词</td></tr><tr><td>mq</td><td>数量词</td></tr><tr><td>n</td><td>名词</td></tr><tr><td>nb</td><td>生物名</td></tr><tr><td>nba</td><td>动物名</td></tr><tr><td>nbc</td><td>动物纲目</td></tr><tr><td>nbp</td><td>植物名</td></tr><tr><td>nf</td><td>食品，比如“薯片”</td></tr><tr><td>ng</td><td>名词性语素</td></tr><tr><td>nh</td><td>医药疾病等健康相关名词</td></tr><tr><td>nhd</td><td>疾病</td></tr><tr><td>nhm</td><td>药品</td></tr><tr><td>ni</td><td>机构相关（不是独立机构名）</td></tr><tr><td>nic</td><td>下属机构</td></tr><tr><td>nis</td><td>机构后缀</td></tr><tr><td>nit</td><td>教育相关机构</td></tr><tr><td>nl</td><td>名词性惯用语</td></tr><tr><td>nm</td><td>物品名</td></tr><tr><td>nmc</td><td>化学品名</td></tr><tr><td>nn</td><td>工作相关名词</td></tr><tr><td>nnd</td><td>职业</td></tr><tr><td>nnt</td><td>职务职称</td></tr><tr><td>nr</td><td>人名</td></tr><tr><td>nr1</td><td>复姓</td></tr><tr><td>nr2</td><td>蒙古姓名</td></tr><tr><td>nrf</td><td>音译人名</td></tr><tr><td>nrj</td><td>日语人名</td></tr><tr><td>ns</td><td>地名</td></tr><tr><td>nsf</td><td>音译地名</td></tr><tr><td>nt</td><td>机构团体名</td></tr><tr><td>ntc</td><td>公司名</td></tr><tr><td>ntcb</td><td>银行</td></tr><tr><td>ntcf</td><td>工厂</td></tr><tr><td>ntch</td><td>酒店宾馆</td></tr><tr><td>nth</td><td>医院</td></tr><tr><td>nto</td><td>政府机构</td></tr><tr><td>nts</td><td>中小学</td></tr><tr><td>ntu</td><td>大学</td></tr><tr><td>nx</td><td>字母专名</td></tr><tr><td>nz</td><td>其他专名</td></tr><tr><td>o</td><td>拟声词</td></tr><tr><td>p</td><td>介词</td></tr><tr><td>pba</td><td>介词“把”</td></tr><tr><td>pbei</td><td>介词“被”</td></tr><tr><td>q</td><td>量词</td></tr><tr><td>qg</td><td>量词语素</td></tr><tr><td>qt</td><td>时量词</td></tr><tr><td>qv</td><td>动量词</td></tr><tr><td>r</td><td>代词</td></tr><tr><td>rg</td><td>代词性语素</td></tr><tr><td>Rg</td><td>古汉语代词性语素</td></tr><tr><td>rr</td><td>人称代词</td></tr><tr><td>ry</td><td>疑问代词</td></tr><tr><td>rys</td><td>处所疑问代词</td></tr><tr><td>ryt</td><td>时间疑问代词</td></tr><tr><td>ryv</td><td>谓词性疑问代词</td></tr><tr><td>rz</td><td>指示代词</td></tr><tr><td>rzs</td><td>处所指示代词</td></tr><tr><td>rzt</td><td>时间指示代词</td></tr><tr><td>rzv</td><td>谓词性指示代词</td></tr><tr><td>s</td><td>处所词</td></tr><tr><td>t</td><td>时间词</td></tr><tr><td>tg</td><td>时间词性语素</td></tr><tr><td>u</td><td>助词</td></tr><tr><td>ud</td><td>助词</td></tr><tr><td>ude1</td><td>的 底</td></tr><tr><td>ude2</td><td>地</td></tr><tr><td>ude3</td><td>得</td></tr><tr><td>udeng</td><td>等 等等 云云</td></tr><tr><td>udh</td><td>的话</td></tr><tr><td>ug</td><td>过</td></tr><tr><td>uguo</td><td>过</td></tr><tr><td>uj</td><td>助词</td></tr><tr><td>ul</td><td>连词</td></tr><tr><td>ule</td><td>了 喽</td></tr><tr><td>ulian</td><td>连 （“连小学生都会”）</td></tr><tr><td>uls</td><td>来讲 来说 而言 说来</td></tr><tr><td>usuo</td><td>所</td></tr><tr><td>uv</td><td>连词</td></tr><tr><td>uyy</td><td>一样 一般 似的 般</td></tr><tr><td>uz</td><td>着</td></tr><tr><td>uzhe</td><td>着</td></tr><tr><td>uzhi</td><td>之</td></tr><tr><td>v</td><td>动词</td></tr><tr><td>vd</td><td>副动词</td></tr><tr><td>vf</td><td>趋向动词</td></tr><tr><td>vg</td><td>动词性语素</td></tr><tr><td>vi</td><td>不及物动词（内动词）</td></tr><tr><td>vl</td><td>动词性惯用语</td></tr><tr><td>vn</td><td>名动词</td></tr><tr><td>vshi</td><td>动词“是”</td></tr><tr><td>vx</td><td>形式动词</td></tr><tr><td>vyou</td><td>动词“有”</td></tr><tr><td>w</td><td>标点符号</td></tr><tr><td>wb</td><td>百分号千分号，全角：％ ‰ 半角：%</td></tr><tr><td>wd</td><td>逗号，全角：， 半角：,</td></tr><tr><td>wf</td><td>分号，全角：； 半角： ;</td></tr><tr><td>wh</td><td>单位符号，全角：￥ ＄ ￡ ° ℃ 半角：$</td></tr><tr><td>wj</td><td>句号，全角：。</td></tr><tr><td>wky</td><td>右括号，全角：） 〕 ］ ｝ 》 】 〗 〉 半角： ) ] { &gt;</td></tr><tr><td>wkz</td><td>左括号，全角：（ 〔 ［ ｛ 《 【 〖 〈 半角：( [ { &lt;</td></tr><tr><td>wm</td><td>冒号，全角：： 半角： :</td></tr><tr><td>wn</td><td>顿号，全角：、</td></tr><tr><td>wp</td><td>破折号，全角：—— －－ ——－ 半角：— —-</td></tr><tr><td>ws</td><td>省略号，全角：…… …</td></tr><tr><td>wt</td><td>叹号，全角：！</td></tr><tr><td>ww</td><td>问号，全角：？</td></tr><tr><td>wyy</td><td>右引号，全角：” ’ 』</td></tr><tr><td>wyz</td><td>左引号，全角：“ ‘ 『</td></tr><tr><td>x</td><td>字符串</td></tr><tr><td>xu</td><td>网址URL</td></tr><tr><td>xx</td><td>非语素字</td></tr><tr><td>y</td><td>语气词(delete yg)</td></tr><tr><td>yg</td><td>语气语素</td></tr><tr><td>z</td><td>状态词</td></tr><tr><td>zg</td><td>状态词</td></tr></tbody></table></article><div class="post-donate"><div id="donate_board" class="donate_bar center"><a id="btn_donate" class="btn_donate" href="javascript:;" title="打赏"></a> <span class="donate_txt">↑<br> 欢迎投食,求鼓励，求支持！</span><br></div><div id="donate_guide" class="donate_bar center hidden"> <img src="/images/alipay.png" alt="支付宝打赏"> <img src="/images/wechatpay.png" alt="微信打赏"></div><script type="text/javascript">document.getElementById("btn_donate").onclick=function(){$("#donate_board").addClass("hidden"),$("#donate_guide").removeClass("hidden")}</script></div><div class="nexmoe-post-copyright"><i class="mdui-list-item-icon nexmoefont icon-info-circle"></i> <strong>本文作者：</strong>OneJane<br> <strong>本文链接：</strong><a href="https://onejane.github.io/2019/08/27/nlp分词词性标注及命名实体/" title="https://onejane.github.io/2019/08/27/nlp分词词性标注及命名实体/" target="_blank" rel="noopener">https://onejane.github.io/2019/08/27/nlp分词词性标注及命名实体/</a><br> <strong>版权声明：</strong>本文采用 <a href="https://creativecommons.org/licenses/by-nc-sa/3.0/cn/deed.zh" target="_blank">CC BY-NC-SA 3.0 CN</a> 协议进行许可</div><section class="nexmoe-comment"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/gitalk@1.5.0/dist/gitalk.min.css"><div id="gitalk"></div><script src="https://cdn.jsdelivr.net/npm/gitalk@1.5.0/dist/gitalk.min.js"></script><script type="text/javascript">var gitalk=new Gitalk({clientID:"e677e59382e1c7a468fd",clientSecret:"717d041bc4ab749f069314862232cfb6ec8adc15",id:decodeURI(window.location.pathname),repo:"onejane.github.io",owner:"onejane",admin:"onejane"});gitalk.render("gitalk")</script></section></div></div></div><script src="https://cdn.jsdelivr.net/npm/mdui@0.4.3/dist/js/mdui.min.js"></script><script src="https://cdn.jsdelivr.net/npm/jquery@3.4.1/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/gh/fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.js"></script><script src="https://cdn.jsdelivr.net/npm/smoothscroll-for-websites@1.4.9/SmoothScroll.min.js"></script><script src="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@9.15.8/build/highlight.min.js"></script><script>hljs.initHighlightingOnLoad()</script><script src="/js/app.js?v=1572918279983"></script><script src="https://cdn.jsdelivr.net/npm/lazysizes@5.1.0/lazysizes.min.js"></script><div hidden><script type="text/javascript" src="https://js.users.51.la/20279757.js"></script></div></body><script src="https://cdn.jsdelivr.net/npm/meting@1.1.0/dist/Meting.min.js"></script></html>